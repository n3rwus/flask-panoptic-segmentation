{% extends "base.html" %}

{% block content %}
<div class="container has-text-centered">
    <h1 class="title">Panoptic Image Segmentation</h1>
    <h2 class="subtitle">Upload a file and view it below:</h2>
    <div class="card">
        <div class="card-content">
            <div class="content">
                <div id="input_file" class="file has-name is-large is-fullwidth">
                    <label class="file-label">
                        <input class="file-input" type="file" name="resume">
                        <span class="file-cta">
                            <span class="file-icon">
                                <i class="fas fa-upload"></i>
                            </span>
                            <span class="file-label">
                                Choose a fileâ€¦
                            </span>
                        </span>
                        <span class="file-name">
                            No file uploaded
                        </span>
                    </label>
                </div>
                <br>
                <button id="upload_button" class="
            button is-large
            is-fullwidth is-info
            is-focused" type="submit" disabled> Upload </button>
            </div>
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script type="text/javascript">

    const fileInput = document.querySelector('#input_file input[type=file]');
    fileInput.onchange = () => {
        let button = $("#upload_button");
        // Make sure a file was selected
        if (fileInput.files.length > 0 && fileInput.files) {
            const fileName = document.querySelector('#input_file .file-name');
            fileName.textContent = fileInput.files[0].name;

            // Check the file extension and size
            if (fileInput.files[0].name.match(/\.(jpg|jpeg)$/i) && fileInput.files[0].size <= 2 * 1024 * 1024) {
                button.removeAttr('disabled');
            } else {
                button.attr('disabled', 'disabled');
            }
        } else {
            button.attr('disabled', 'disabled');
        }
    };
</script>

{% endblock %}